/*! sifter.js | https://github.com/brianreavis/sifter.js | Apache License (v2) */
!function(r,e){if(typeof define==="function"&&define.amd){define(e)}else if(typeof exports==="object"){module.exports=e()}else{r.Sifter=e()}}(this,function(){var r=function(r,e){this.items=r;this.settings=e||{diacritics:true}};r.prototype.tokenize=function(r){r=n(String(r||"").toLowerCase());if(!r||!r.length)return[];var e,t,o,s;var u=[];var c=r.split(/ +/);for(e=0,t=c.length;e<t;e++){o=i(c[e]);if(this.settings.diacritics){for(s in f){if(f.hasOwnProperty(s)){o=o.replace(new RegExp(s,"g"),f[s])}}}u.push({string:c[e],regex:new RegExp(o,"i")})}return u};r.prototype.iterator=function(r,e){var t;if(o(r)){t=Array.prototype.forEach||function(r){for(var e=0,t=this.length;e<t;e++){r(this[e],e,this)}}}else{t=function(r){for(var e in this){if(this.hasOwnProperty(e)){r(this[e],e,this)}}}}t.apply(r,[e])};r.prototype.getScoreFunction=function(r,e){var t,n,i,o;t=this;r=t.prepareSearch(r,e);i=r.tokens;n=r.options.fields;o=i.length;var f=function(r,e){var t,n;if(!r)return 0;r=String(r||"");n=r.search(e.regex);if(n===-1)return 0;t=e.string.length/r.length;if(n===0)t+=.5;return t};var s=function(){var r=n.length;if(!r){return function(){return 0}}if(r===1){return function(r,e){return f(e[n[0]],r)}}return function(e,t){for(var i=0,o=0;i<r;i++){o+=f(t[n[i]],e)}return o/r}}();if(!o){return function(){return 0}}if(o===1){return function(r){return s(i[0],r)}}return function(r){for(var e=0,t=0;e<o;e++){t+=s(i[e],r)}return t/o}};r.prototype.getSortFunction=function(r,t){var n,i,f,s,u,c,a,p,l,h;f=this;r=f.prepareSearch(r,t);l=function(r,e){if(r==="$score")return e.score;return f.items[e.id][r]};if(!t.sort){u=[]}else if(!o(t.sort)){u=[t.sort]}else{u=[];for(n=0,i=t.sort.length;n<i;n++){if(r.query||t.sort[n].field!=="$score"){u.push(t.sort[n])}}}if(r.query){h=true;for(n=0,i=u.length;n<i;n++){if(u[n].field==="$score"){h=false;break}}if(h){u.unshift({field:"$score",direction:"desc"})}}else{for(n=0,i=u.length;n<i;n++){if(u[n].field==="$score"){u.splice(n,1);break}}}p=[];for(n=0,i=u.length;n<i;n++){p.push(u[n].direction==="desc"?-1:1)}c=u.length;if(!c){return function(){return 0}}else if(c===1){s=u[0].field;a=p[0];return function(r,t){return a*e(l(s,r),l(s,t))}}else{return function(r,t){var n,i,o,f,s;for(n=0;n<c;n++){s=u[n].field;i=p[n]*e(l(s,r),l(s,t));if(i)return i}return 0}}};r.prototype.prepareSearch=function(r,e){if(typeof r==="object")return r;return{options:t({},e),query:String(r||"").toLowerCase(),tokens:this.tokenize(r),total:0,items:[]}};r.prototype.search=function(r,e){var t=this,n,i,f,s;f=this.prepareSearch(r,e);e=f.options;r=f.query;if(!o(e.fields))e.fields=[e.fields];s=e.score||t.getScoreFunction(f);if(r.length){t.iterator(t.items,function(r,t){i=s(r);if(e.filter===false||i>0){f.items.push({score:i,id:t})}})}else{t.iterator(t.items,function(r,e){f.items.push({score:1,id:e})})}f.items.sort(t.getSortFunction(f,e));f.total=f.items.length;if(typeof e.limit==="number"){f.items=f.items.slice(0,e.limit)}return f};var e=function(r,e){if(typeof r==="number"&&typeof e==="number"){return r>e?1:r<e?-1:0}r=String(r||"").toLowerCase();e=String(e||"").toLowerCase();if(r>e)return 1;if(e>r)return-1;return 0};var t=function(r,e){var t,n,i,o;for(t=1,n=arguments.length;t<n;t++){o=arguments[t];if(!o)continue;for(i in o){if(o.hasOwnProperty(i)){r[i]=o[i]}}}return r};var n=function(r){return(r+"").replace(/^\s+|\s+$|/g,"")};var i=function(r){return(r+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")};var o=Array.isArray||$&&$.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};var f={a:"[a\xc0\xc1\xc2\xc3\xc4\xc5\xe0\xe1\xe2\xe3\xe4\xe5]",c:"[c\xc7\xe7]",e:"[e\xc8\xc9\xca\xcb\xe8\xe9\xea\xeb]",i:"[i\xcc\xcd\xce\xcf\xec\xed\xee\xef]",n:"[n\xd1\xf1]",o:"[o\xd2\xd3\xd4\xd5\xd5\xd6\xd8\xf2\xf3\xf4\xf5\xf6\xf8]",s:"[s\u0160\u0161]",u:"[u\xd9\xda\xdb\xdc\xf9\xfa\xfb\xfc]",y:"[y\u0178\xff\xfd]",z:"[z\u017d\u017e]"};return r});